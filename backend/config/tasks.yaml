# CrewAI Task Configuration
# This file defines the tasks for Document Upload Processing
# Reference: SAD Section 5.3 (Task Orchestration Specification)

tasks:
  - id: process_document_upload
    description: |
      Process uploaded document: extract text using OCR, identify document type,
      validate format and completeness, and extract key fields.
    agent_id: document_processing_agent
    expected_output: |
      Extracted document data in JSON format with the following structure:
      {
        "document_type": "I9|W4|ID|PASSPORT",
        "extracted_data": {...},
        "validation_status": "valid|invalid|needs-review",
        "confidence_scores": {...}
      }
    context:
      - Document file path from API upload
      - User ID and metadata
    output_file: null  # Results stored in database, not file
    human_input: false
    async_execution: false

  - id: verify_compliance
    description: |
      Verify document compliance with regulatory requirements (I-9, W-4).
      Check completeness, accuracy, and generate audit log entries.
    agent_id: compliance_agent
    expected_output: |
      Compliance status and audit log in JSON format:
      {
        "compliance_status": "compliant|non-compliant|needs-review",
        "compliance_type": "I9|W4",
        "audit_log": {...},
        "missing_documents": [...]
      }
    context:
      - Extracted document data from process_document_upload task
      - User ID and onboarding context
    output_file: null  # Results stored in database
    human_input: false
    async_execution: false

